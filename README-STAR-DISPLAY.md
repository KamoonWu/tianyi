# 紫微斗数星曜展示系统优化

本文档详细说明了紫微斗数排盘系统中星曜展示系统的优化内容，包括星曜分类、亮度计算和展示方式的改进。

## 目录

1. [星曜分类](#星曜分类)
2. [星曜亮度](#星曜亮度)
3. [展示方式](#展示方式)
4. [四化星处理](#四化星处理)
5. [优化效果](#优化效果)

## 星曜分类

根据紫微斗数理论和 [ziwei.pro](https://ziwei.pro/posts/star.html) 网站的分类方式，我们将星曜分为三大类：

### 14主星

紫微斗数的核心星曜，包括：
- 紫微系六星：紫微、天机、太阳、武曲、天同、廉贞
- 天府系八星：天府、太阴、贪狼、巨门、天相、天梁、七杀、破军

### 14辅星

辅助解读的重要星曜，包括：
- 左辅、右弼
- 文昌、文曲
- 天魁、天钺
- 禄存、天马
- 擎羊、陀罗
- 火星、铃星
- 地空、地劫

### 37杂耀

提供补充信息的星曜，部分常见杂耀包括：
- 天刑、天姚、解神
- 天巫、天月、阴煞
- 台辅、封诰、天空
- 天哭、天虚、龙池
- 凤阁、红鸾、天喜
- 孤辰、寡宿、蜚廉
- 破碎、天才、天寿
- 天伤、天使、天官
- 天福、天厨、截空
- 旬空、空亡、天贵
- 天钺、天厄、天煞
- 指背、咸池、月煞
- 亡神

## 星曜亮度

每颗星曜在不同地支有不同的亮度状态，影响其力量的强弱：

1. **庙**：星曜最有力量的状态
2. **旺**：星曜力量较强的状态
3. **得**：星曜力量良好的状态
4. **利**：星曜力量适中偏好的状态
5. **平**：星曜力量中性的状态
6. **闲**：星曜力量较弱的状态
7. **陷**：星曜力量最弱的状态

优化后的系统会根据星曜所在地支自动计算其亮度，并在展示时将非"平"亮度的星曜亮度显示出来。

## 展示方式

优化后的星曜展示系统采用了更清晰的布局方式：

1. **主星区域**：位于宫位左上角，按照紫微、天机、太阳等顺序排列
2. **辅星区域**：位于主星右侧，按照左辅、右弼、文昌等顺序排列
3. **杂耀区域**：位于辅星右侧，垂直排列
4. **四化星**：以图标形式显示在右上角
5. **天干地支**：位于右下角
6. **宫位名称**：位于天干地支左侧

## 四化星处理

四化星（化禄、化权、化科、化忌）是紫微斗数中的重要变化力量，优化后的系统对四化星进行了特殊处理：

1. **四化星计算**：根据年干准确计算四化星
2. **四化星显示**：在宫位右上角以图标形式显示
3. **四化星影响**：添加了四化星的含义和影响描述
   - 化禄：代表财富、福气、官职
   - 化权：代表权力、地位、能力
   - 化科：代表学业、文凭、才华
   - 化忌：代表阻碍、困难、是非

## 优化效果

优化后的星曜展示系统具有以下优点：

1. **分类清晰**：主星、辅星、杂耀分开展示，层次分明
2. **亮度直观**：星曜亮度直接附加到星曜名称后，一目了然
3. **排序合理**：按照星曜重要性和传统顺序排列，符合紫微斗数理论
4. **四化明确**：四化星以图标形式显示，突出其变化作用
5. **布局优化**：合理利用宫位空间，信息展示更加清晰

通过这些优化，紫微斗数排盘系统的星曜展示更加符合传统理论，也更加直观易读，为用户提供更专业的紫微斗数排盘服务。 